var i18n = {
    en: {
        tagline: "View location info for Threads users",
        introDescription: "This app is a Safari extension. To use it, browse threads.net in Safari \u2014 location and join date info will appear automatically next to usernames.",
        introFollowSteps: "Follow the steps below to enable the extension.",
        howToEnable: "How to Enable",
        step1Title: "Open threads.net in Safari",
        step1Desc: "Use the button below or type threads.net in Safari",
        step2Title: "Tap the Page Settings button",
        step2Desc: "The icon at the bottom-left of the Safari toolbar, next to the URL bar",
        step3Title: "Tap Manage Extensions",
        step3Desc: "At the bottom of the menu",
        step4Title: "Enable Lee-Su-Sui",
        step4Desc: "Toggle it on and you're all set!",
        openThreads: "Open Threads in Safari",
        features: "Features",
        feature1: "See user locations directly on posts",
        feature2: "View when users joined Threads",
        feature3: "Works automatically on threads.net",
        feature4: "Privacy-friendly: no data sent to servers",
        howToUse: "How to Use",
        usageDesc: "After enabling the extension, open threads.net in Safari. Location info will appear automatically next to usernames on posts and profiles.",
        macStateUnknown: "You can turn on Lee-Su-Sui's extension in Safari Extensions preferences.",
        macStateOn: "Lee-Su-Sui's extension is currently on. You can turn it off in Safari Extensions preferences.",
        macStateOff: "Lee-Su-Sui's extension is currently off. You can turn it on in Safari Extensions preferences.",
        macOpenPrefs: "Quit and Open Safari Extensions Preferences\u2026",
        macStateOnSettings: "Lee-Su-Sui's extension is currently on. You can turn it off in the Extensions section of Safari Settings.",
        macStateOffSettings: "Lee-Su-Sui's extension is currently off. You can turn it on in the Extensions section of Safari Settings.",
        macStateUnknownSettings: "You can turn on Lee-Su-Sui's extension in the Extensions section of Safari Settings.",
        macOpenSettings: "Quit and Open Safari Settings\u2026"
    },
    zh_TW: {
        tagline: "\u67E5\u770B Threads \u7528\u6236\u7684\u4F4D\u7F6E\u8CC7\u8A0A",
        introDescription: "\u9019\u662F\u4E00\u500B Safari \u64F4\u5145\u529F\u80FD\u3002\u8ACB\u4F7F\u7528 Safari \u700F\u89BD threads.net\uFF0C\u4F4D\u7F6E\u548C\u52A0\u5165\u65E5\u671F\u8CC7\u8A0A\u6703\u81EA\u52D5\u986F\u793A\u5728\u7528\u6236\u540D\u7A31\u65C1\u3002",
        introFollowSteps: "\u8ACB\u4F9D\u7167\u4EE5\u4E0B\u6B65\u9A5F\u555F\u7528\u64F4\u5145\u529F\u80FD\u3002",
        howToEnable: "\u5982\u4F55\u555F\u7528",
        step1Title: "\u5728 Safari \u4E2D\u958B\u555F threads.net",
        step1Desc: "\u4F7F\u7528\u4E0B\u65B9\u6309\u9215\u6216\u5728 Safari \u4E2D\u8F38\u5165 threads.net",
        step2Title: "\u9EDE\u6309\u9801\u9762\u8A2D\u5B9A\u6309\u9215",
        step2Desc: "Safari \u5DE5\u5177\u5217\u5DE6\u4E0B\u65B9\u3001\u7DB2\u5740\u5217\u65C1\u7684\u5716\u793A",
        step3Title: "\u9EDE\u6309\u300C\u7BA1\u7406\u64F4\u5145\u529F\u80FD\u300D",
        step3Desc: "\u5728\u9078\u55AE\u5E95\u90E8",
        step4Title: "\u555F\u7528 Lee-Su-Sui",
        step4Desc: "\u5207\u63DB\u958B\u555F\u5373\u53EF\uFF01",
        openThreads: "\u5728 Safari \u4E2D\u958B\u555F Threads",
        features: "\u529F\u80FD",
        feature1: "\u76F4\u63A5\u5728\u8CBC\u6587\u4E0A\u67E5\u770B\u7528\u6236\u4F4D\u7F6E",
        feature2: "\u67E5\u770B\u7528\u6236\u52A0\u5165 Threads \u7684\u6642\u9593",
        feature3: "\u5728 threads.net \u4E0A\u81EA\u52D5\u904B\u4F5C",
        feature4: "\u6CE8\u91CD\u96B1\u79C1\uFF1A\u4E0D\u6703\u5411\u4F3A\u670D\u5668\u50B3\u9001\u8CC7\u6599",
        howToUse: "\u5982\u4F55\u4F7F\u7528",
        usageDesc: "\u555F\u7528\u64F4\u5145\u529F\u80FD\u5F8C\uFF0C\u5728 Safari \u4E2D\u958B\u555F threads.net\u3002\u4F4D\u7F6E\u8CC7\u8A0A\u6703\u81EA\u52D5\u986F\u793A\u5728\u8CBC\u6587\u548C\u500B\u4EBA\u6A94\u6848\u7684\u7528\u6236\u540D\u7A31\u65C1\u3002",
        macStateUnknown: "\u60A8\u53EF\u4EE5\u5728 Safari \u64F4\u5145\u529F\u80FD\u504F\u597D\u8A2D\u5B9A\u4E2D\u958B\u555F Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u3002",
        macStateOn: "Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u76EE\u524D\u5DF2\u958B\u555F\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u64F4\u5145\u529F\u80FD\u504F\u597D\u8A2D\u5B9A\u4E2D\u5C07\u5176\u95DC\u9589\u3002",
        macStateOff: "Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u76EE\u524D\u5DF2\u95DC\u9589\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u64F4\u5145\u529F\u80FD\u504F\u597D\u8A2D\u5B9A\u4E2D\u5C07\u5176\u958B\u555F\u3002",
        macOpenPrefs: "\u7D50\u675F\u4E26\u958B\u555F Safari \u64F4\u5145\u529F\u80FD\u504F\u597D\u8A2D\u5B9A\u2026",
        macStateOnSettings: "Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u76EE\u524D\u5DF2\u958B\u555F\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u8A2D\u5B9A\u7684\u64F4\u5145\u529F\u80FD\u5340\u584A\u4E2D\u5C07\u5176\u95DC\u9589\u3002",
        macStateOffSettings: "Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u76EE\u524D\u5DF2\u95DC\u9589\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u8A2D\u5B9A\u7684\u64F4\u5145\u529F\u80FD\u5340\u584A\u4E2D\u5C07\u5176\u958B\u555F\u3002",
        macStateUnknownSettings: "\u60A8\u53EF\u4EE5\u5728 Safari \u8A2D\u5B9A\u7684\u64F4\u5145\u529F\u80FD\u5340\u584A\u4E2D\u958B\u555F Lee-Su-Sui \u7684\u64F4\u5145\u529F\u80FD\u3002",
        macOpenSettings: "\u7D50\u675F\u4E26\u958B\u555F Safari \u8A2D\u5B9A\u2026"
    },
    zh_CN: {
        tagline: "\u67E5\u770B Threads \u7528\u6237\u7684\u4F4D\u7F6E\u4FE1\u606F",
        introDescription: "\u8FD9\u662F\u4E00\u4E2A Safari \u6269\u5C55\u529F\u80FD\u3002\u8BF7\u4F7F\u7528 Safari \u6D4F\u89C8 threads.net\uFF0C\u4F4D\u7F6E\u548C\u52A0\u5165\u65E5\u671F\u4FE1\u606F\u4F1A\u81EA\u52A8\u663E\u793A\u5728\u7528\u6237\u540D\u79F0\u65C1\u3002",
        introFollowSteps: "\u8BF7\u6309\u7167\u4EE5\u4E0B\u6B65\u9AA4\u542F\u7528\u6269\u5C55\u529F\u80FD\u3002",
        howToEnable: "\u5982\u4F55\u542F\u7528",
        step1Title: "\u5728 Safari \u4E2D\u6253\u5F00 threads.net",
        step1Desc: "\u4F7F\u7528\u4E0B\u65B9\u6309\u94AE\u6216\u5728 Safari \u4E2D\u8F93\u5165 threads.net",
        step2Title: "\u70B9\u51FB\u9875\u9762\u8BBE\u7F6E\u6309\u94AE",
        step2Desc: "Safari \u5DE5\u5177\u680F\u5DE6\u4E0B\u65B9\u3001\u7F51\u5740\u680F\u65C1\u7684\u56FE\u6807",
        step3Title: "\u70B9\u51FB\u300C\u7BA1\u7406\u6269\u5C55\u529F\u80FD\u300D",
        step3Desc: "\u5728\u83DC\u5355\u5E95\u90E8",
        step4Title: "\u542F\u7528 Lee-Su-Sui",
        step4Desc: "\u5207\u6362\u5F00\u542F\u5373\u53EF\uFF01",
        openThreads: "\u5728 Safari \u4E2D\u6253\u5F00 Threads",
        features: "\u529F\u80FD",
        feature1: "\u76F4\u63A5\u5728\u5E16\u5B50\u4E0A\u67E5\u770B\u7528\u6237\u4F4D\u7F6E",
        feature2: "\u67E5\u770B\u7528\u6237\u52A0\u5165 Threads \u7684\u65F6\u95F4",
        feature3: "\u5728 threads.net \u4E0A\u81EA\u52A8\u8FD0\u884C",
        feature4: "\u6CE8\u91CD\u9690\u79C1\uFF1A\u4E0D\u4F1A\u5411\u670D\u52A1\u5668\u53D1\u9001\u6570\u636E",
        howToUse: "\u5982\u4F55\u4F7F\u7528",
        usageDesc: "\u542F\u7528\u6269\u5C55\u529F\u80FD\u540E\uFF0C\u5728 Safari \u4E2D\u6253\u5F00 threads.net\u3002\u4F4D\u7F6E\u4FE1\u606F\u4F1A\u81EA\u52A8\u663E\u793A\u5728\u5E16\u5B50\u548C\u4E2A\u4EBA\u8D44\u6599\u7684\u7528\u6237\u540D\u79F0\u65C1\u3002",
        macStateUnknown: "\u60A8\u53EF\u4EE5\u5728 Safari \u6269\u5C55\u529F\u80FD\u504F\u597D\u8BBE\u7F6E\u4E2D\u5F00\u542F Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u3002",
        macStateOn: "Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u76EE\u524D\u5DF2\u5F00\u542F\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u6269\u5C55\u529F\u80FD\u504F\u597D\u8BBE\u7F6E\u4E2D\u5C06\u5176\u5173\u95ED\u3002",
        macStateOff: "Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u76EE\u524D\u5DF2\u5173\u95ED\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u6269\u5C55\u529F\u80FD\u504F\u597D\u8BBE\u7F6E\u4E2D\u5C06\u5176\u5F00\u542F\u3002",
        macOpenPrefs: "\u7ED3\u675F\u5E76\u6253\u5F00 Safari \u6269\u5C55\u529F\u80FD\u504F\u597D\u8BBE\u7F6E\u2026",
        macStateOnSettings: "Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u76EE\u524D\u5DF2\u5F00\u542F\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u8BBE\u7F6E\u7684\u6269\u5C55\u529F\u80FD\u533A\u5757\u4E2D\u5C06\u5176\u5173\u95ED\u3002",
        macStateOffSettings: "Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u76EE\u524D\u5DF2\u5173\u95ED\u3002\u60A8\u53EF\u4EE5\u5728 Safari \u8BBE\u7F6E\u7684\u6269\u5C55\u529F\u80FD\u533A\u5757\u4E2D\u5C06\u5176\u5F00\u542F\u3002",
        macStateUnknownSettings: "\u60A8\u53EF\u4EE5\u5728 Safari \u8BBE\u7F6E\u7684\u6269\u5C55\u529F\u80FD\u533A\u5757\u4E2D\u5F00\u542F Lee-Su-Sui \u7684\u6269\u5C55\u529F\u80FD\u3002",
        macOpenSettings: "\u7ED3\u675F\u5E76\u6253\u5F00 Safari \u8BBE\u7F6E\u2026"
    },
    ja: {
        tagline: "Threads\u30E6\u30FC\u30B6\u30FC\u306E\u4F4D\u7F6E\u60C5\u5831\u3092\u8868\u793A",
        introDescription: "\u3053\u308C\u306F Safari \u62E1\u5F35\u6A5F\u80FD\u3067\u3059\u3002Safari \u3067 threads.net \u3092\u95B2\u89A7\u3059\u308B\u3068\u3001\u4F4D\u7F6E\u60C5\u5831\u3068\u53C2\u52A0\u65E5\u304C\u30E6\u30FC\u30B6\u30FC\u540D\u306E\u6A2A\u306B\u81EA\u52D5\u7684\u306B\u8868\u793A\u3055\u308C\u307E\u3059\u3002",
        introFollowSteps: "\u4EE5\u4E0B\u306E\u624B\u9806\u306B\u5F93\u3063\u3066\u62E1\u5F35\u6A5F\u80FD\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",
        howToEnable: "\u6709\u52B9\u306B\u3059\u308B\u65B9\u6CD5",
        step1Title: "Safari \u3067 threads.net \u3092\u958B\u304F",
        step1Desc: "\u4E0B\u306E\u30DC\u30BF\u30F3\u3092\u4F7F\u3046\u304B\u3001Safari \u3067 threads.net \u3068\u5165\u529B",
        step2Title: "\u30DA\u30FC\u30B8\u8A2D\u5B9A\u30DC\u30BF\u30F3\u3092\u30BF\u30C3\u30D7",
        step2Desc: "Safari \u30C4\u30FC\u30EB\u30D0\u30FC\u306E\u5DE6\u4E0B\u3001URL\u30D0\u30FC\u306E\u6A2A\u306E\u30A2\u30A4\u30B3\u30F3",
        step3Title: "\u300C\u6A5F\u80FD\u62E1\u5F35\u3092\u7BA1\u7406\u300D\u3092\u30BF\u30C3\u30D7",
        step3Desc: "\u30E1\u30CB\u30E5\u30FC\u306E\u4E0B\u90E8\u306B\u3042\u308A\u307E\u3059",
        step4Title: "Lee-Su-Sui \u3092\u6709\u52B9\u306B\u3059\u308B",
        step4Desc: "\u30C8\u30B0\u30EB\u3092\u30AA\u30F3\u306B\u3059\u308C\u3070\u5B8C\u4E86\uFF01",
        openThreads: "Safari \u3067 Threads \u3092\u958B\u304F",
        features: "\u6A5F\u80FD",
        feature1: "\u6295\u7A3F\u4E0A\u3067\u30E6\u30FC\u30B6\u30FC\u306E\u4F4D\u7F6E\u3092\u76F4\u63A5\u78BA\u8A8D",
        feature2: "\u30E6\u30FC\u30B6\u30FC\u306E Threads \u53C2\u52A0\u65E5\u3092\u8868\u793A",
        feature3: "threads.net \u3067\u81EA\u52D5\u7684\u306B\u52D5\u4F5C",
        feature4: "\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC\u91CD\u8996\uFF1A\u30B5\u30FC\u30D0\u30FC\u306B\u30C7\u30FC\u30BF\u3092\u9001\u4FE1\u3057\u307E\u305B\u3093",
        howToUse: "\u4F7F\u3044\u65B9",
        usageDesc: "\u62E1\u5F35\u6A5F\u80FD\u3092\u6709\u52B9\u306B\u3057\u305F\u5F8C\u3001Safari \u3067 threads.net \u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002\u4F4D\u7F6E\u60C5\u5831\u304C\u6295\u7A3F\u3084\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u306E\u30E6\u30FC\u30B6\u30FC\u540D\u306E\u6A2A\u306B\u81EA\u52D5\u8868\u793A\u3055\u308C\u307E\u3059\u3002",
        macStateUnknown: "Safari \u306E\u6A5F\u80FD\u62E1\u5F35\u74B0\u5883\u8A2D\u5B9A\u3067 Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u3092\u6709\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macStateOn: "Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u306F\u73FE\u5728\u6709\u52B9\u3067\u3059\u3002Safari \u306E\u6A5F\u80FD\u62E1\u5F35\u74B0\u5883\u8A2D\u5B9A\u3067\u7121\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macStateOff: "Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u306F\u73FE\u5728\u7121\u52B9\u3067\u3059\u3002Safari \u306E\u6A5F\u80FD\u62E1\u5F35\u74B0\u5883\u8A2D\u5B9A\u3067\u6709\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macOpenPrefs: "\u7D42\u4E86\u3057\u3066 Safari \u306E\u6A5F\u80FD\u62E1\u5F35\u74B0\u5883\u8A2D\u5B9A\u3092\u958B\u304F\u2026",
        macStateOnSettings: "Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u306F\u73FE\u5728\u6709\u52B9\u3067\u3059\u3002Safari \u8A2D\u5B9A\u306E\u6A5F\u80FD\u62E1\u5F35\u30BB\u30AF\u30B7\u30E7\u30F3\u3067\u7121\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macStateOffSettings: "Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u306F\u73FE\u5728\u7121\u52B9\u3067\u3059\u3002Safari \u8A2D\u5B9A\u306E\u6A5F\u80FD\u62E1\u5F35\u30BB\u30AF\u30B7\u30E7\u30F3\u3067\u6709\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macStateUnknownSettings: "Safari \u8A2D\u5B9A\u306E\u6A5F\u80FD\u62E1\u5F35\u30BB\u30AF\u30B7\u30E7\u30F3\u3067 Lee-Su-Sui \u306E\u62E1\u5F35\u6A5F\u80FD\u3092\u6709\u52B9\u306B\u3067\u304D\u307E\u3059\u3002",
        macOpenSettings: "\u7D42\u4E86\u3057\u3066 Safari \u8A2D\u5B9A\u3092\u958B\u304F\u2026"
    },
    ko: {
        tagline: "Threads \uC0AC\uC6A9\uC790\uC758 \uC704\uCE58 \uC815\uBCF4 \uBCF4\uAE30",
        introDescription: "\uC774 \uC571\uC740 Safari \uD655\uC7A5 \uAE30\uB2A5\uC785\uB2C8\uB2E4. Safari\uC5D0\uC11C threads.net\uC744 \uBE0C\uB77C\uC6B0\uC9D5\uD558\uBA74 \uC704\uCE58 \uBC0F \uAC00\uC785 \uB0A0\uC9DC \uC815\uBCF4\uAC00 \uC0AC\uC6A9\uC790 \uC774\uB984 \uC606\uC5D0 \uC790\uB3D9\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4.",
        introFollowSteps: "\uC544\uB798 \uB2E8\uACC4\uB97C \uB530\uB77C \uD655\uC7A5 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD558\uC138\uC694.",
        howToEnable: "\uD65C\uC131\uD654 \uBC29\uBC95",
        step1Title: "Safari\uC5D0\uC11C threads.net \uC5F4\uAE30",
        step1Desc: "\uC544\uB798 \uBC84\uD2BC\uC744 \uC0AC\uC6A9\uD558\uAC70\uB098 Safari\uC5D0\uC11C threads.net \uC785\uB825",
        step2Title: "\uD398\uC774\uC9C0 \uC124\uC815 \uBC84\uD2BC \uD0ED",
        step2Desc: "Safari \uD234\uBC14 \uC67C\uCABD \uD558\uB2E8, URL \uBC14 \uC606\uC758 \uC544\uC774\uCF58",
        step3Title: "\u300C\uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8 \uAD00\uB9AC\u300D \uD0ED",
        step3Desc: "\uBA54\uB274 \uD558\uB2E8\uC5D0 \uC788\uC2B5\uB2C8\uB2E4",
        step4Title: "Lee-Su-Sui \uD65C\uC131\uD654",
        step4Desc: "\uD1A0\uAE00\uC744 \uCF1C\uBA74 \uC644\uB8CC!",
        openThreads: "Safari\uC5D0\uC11C Threads \uC5F4\uAE30",
        features: "\uAE30\uB2A5",
        feature1: "\uAC8C\uC2DC\uBB3C\uC5D0\uC11C \uC0AC\uC6A9\uC790 \uC704\uCE58 \uBC14\uB85C \uD655\uC778",
        feature2: "\uC0AC\uC6A9\uC790\uC758 Threads \uAC00\uC785 \uC2DC\uAE30 \uD655\uC778",
        feature3: "threads.net\uC5D0\uC11C \uC790\uB3D9\uC73C\uB85C \uC791\uB3D9",
        feature4: "\uAC1C\uC778\uC815\uBCF4 \uBCF4\uD638: \uC11C\uBC84\uC5D0 \uB370\uC774\uD130\uB97C \uC804\uC1A1\uD558\uC9C0 \uC54A\uC74C",
        howToUse: "\uC0AC\uC6A9 \uBC29\uBC95",
        usageDesc: "\uD655\uC7A5 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD55C \uD6C4 Safari\uC5D0\uC11C threads.net\uC744 \uC5EC\uC138\uC694. \uC704\uCE58 \uC815\uBCF4\uAC00 \uAC8C\uC2DC\uBB3C\uACFC \uD504\uB85C\uD544\uC758 \uC0AC\uC6A9\uC790 \uC774\uB984 \uC606\uC5D0 \uC790\uB3D9\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4.",
        macStateUnknown: "Safari \uD655\uC7A5 \uAE30\uB2A5 \uD658\uACBD\uC124\uC815\uC5D0\uC11C Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macStateOn: "Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC774 \uD604\uC7AC \uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4. Safari \uD655\uC7A5 \uAE30\uB2A5 \uD658\uACBD\uC124\uC815\uC5D0\uC11C \uBE44\uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macStateOff: "Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC774 \uD604\uC7AC \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4. Safari \uD655\uC7A5 \uAE30\uB2A5 \uD658\uACBD\uC124\uC815\uC5D0\uC11C \uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macOpenPrefs: "\uC885\uB8CC\uD558\uACE0 Safari \uD655\uC7A5 \uAE30\uB2A5 \uD658\uACBD\uC124\uC815 \uC5F4\uAE30\u2026",
        macStateOnSettings: "Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC774 \uD604\uC7AC \uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4. Safari \uC124\uC815\uC758 \uD655\uC7A5 \uAE30\uB2A5 \uC139\uC158\uC5D0\uC11C \uBE44\uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macStateOffSettings: "Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC774 \uD604\uC7AC \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4. Safari \uC124\uC815\uC758 \uD655\uC7A5 \uAE30\uB2A5 \uC139\uC158\uC5D0\uC11C \uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macStateUnknownSettings: "Safari \uC124\uC815\uC758 \uD655\uC7A5 \uAE30\uB2A5 \uC139\uC158\uC5D0\uC11C Lee-Su-Sui \uD655\uC7A5 \uAE30\uB2A5\uC744 \uD65C\uC131\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
        macOpenSettings: "\uC885\uB8CC\uD558\uACE0 Safari \uC124\uC815 \uC5F4\uAE30\u2026"
    }
};

function setLocale(locale) {
    // Map iOS locale codes to our keys (e.g., "zh-Hant" -> "zh_TW", "zh-Hans" -> "zh_CN")
    var localeMap = {
        "zh-Hant": "zh_TW", "zh-TW": "zh_TW", "zh_Hant": "zh_TW",
        "zh-Hans": "zh_CN", "zh-CN": "zh_CN", "zh_Hans": "zh_CN",
        "ja": "ja", "ja-JP": "ja",
        "ko": "ko", "ko-KR": "ko",
        "en": "en", "en-US": "en", "en-GB": "en"
    };

    // Try exact match, then progressively shorter prefixes
    // e.g., "zh-Hant-TW" -> "zh-Hant" -> "zh"
    var lang = localeMap[locale];
    if (!lang) {
        var parts = locale.split("-");
        for (var i = parts.length - 1; i > 0 && !lang; i--) {
            lang = localeMap[parts.slice(0, i).join("-")];
        }
    }
    lang = lang || "en";
    var strings = i18n[lang] || i18n["en"];
    document.body.setAttribute("data-lang", lang);

    var elements = document.querySelectorAll("[data-i18n]");
    for (var j = 0; j < elements.length; j++) {
        var key = elements[j].getAttribute("data-i18n");
        if (strings[key]) {
            elements[j].textContent = strings[key];
        }
    }
}

function show(platform, enabled, useSettingsInsteadOfPreferences) {
    document.body.classList.add("platform-" + platform);

    if (useSettingsInsteadOfPreferences) {
        var stateOn = document.querySelector(".platform-mac .state-on");
        var stateOff = document.querySelector(".platform-mac .state-off");
        var stateUnknown = document.querySelector(".platform-mac .state-unknown");
        var openPrefsEl = document.querySelector(".platform-mac .open-preferences");
        var strings = i18n[document.body.getAttribute("data-lang") || "en"] || i18n["en"];
        if (stateOn) stateOn.textContent = strings.macStateOnSettings;
        if (stateOff) stateOff.textContent = strings.macStateOffSettings;
        if (stateUnknown) stateUnknown.textContent = strings.macStateUnknownSettings;
        if (openPrefsEl) openPrefsEl.textContent = strings.macOpenSettings;
    }

    if (typeof enabled === "boolean") {
        document.body.classList.toggle("state-on", enabled);
        document.body.classList.toggle("state-off", !enabled);
    } else {
        document.body.classList.remove("state-on");
        document.body.classList.remove("state-off");
    }
}

function setVersion(version) {
    var el = document.getElementById("app-version");
    if (el) {
        el.textContent = "Version " + version;
    }
}

function openSettings() {
    webkit.messageHandlers.controller.postMessage("open-settings");
}

function openPreferences() {
    webkit.messageHandlers.controller.postMessage("open-preferences");
}

var openPrefsBtn = document.querySelector("button.open-preferences");
if (openPrefsBtn) {
    openPrefsBtn.addEventListener("click", openPreferences);
}

var openSettingsBtn = document.querySelector("button.open-settings");
if (openSettingsBtn) {
    openSettingsBtn.addEventListener("click", openSettings);
}

var openThreadsBtn = document.querySelector("button.open-threads");
if (openThreadsBtn) {
    openThreadsBtn.addEventListener("click", function() {
        webkit.messageHandlers.controller.postMessage("open-threads");
    });
}
